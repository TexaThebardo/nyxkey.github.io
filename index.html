<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NYX Launcher</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
    --bg1: #2a2f5a;
    --bg2: #161a3a;
    --card: rgba(255,255,255,0.08);
    --accent: #6c63ff;
    --text: #e0e0e0;
    --success: #4CAF50;
    --error: #f44336;
    --warning: #ff9800;
    --code-bg: #1a1a2e;
    --code-text: #8be9fd;
    --line-number: #6272a4;
}
body.dark {
    --bg1: #1a0026;
    --bg2: #09000f;
    --card: rgba(120,80,180,0.12);
    --accent: #a56bff;
    --text: #f2eaff;
    --code-bg: #0f0f1f;
    --code-text: #bd93f9;
    --line-number: #6272a4;
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
}
body {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: right;
    overflow-x: hidden;
    color: var(--text);
    background: radial-gradient(circle at center, var(--bg1), var(--bg2));
    transition: background 0.5s ease;
    padding: 20px;
}
canvas {
    position: fixed;
    inset: 0;
    z-index: 0;
}

/* NOTIFICATIONS */
.notification-container {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.notification {
    background: var(--card);
    backdrop-filter: blur(15px);
    border-radius: 12px;
    padding: 15px 20px;
    min-width: 300px;
    display: flex;
    align-items: center;
    gap: 15px;
    border-left: 4px solid var(--accent);
    box-shadow: 0 8px 25px rgba(0,0,0,0.4);
    transform: translateX(400px);
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}
.notification.show {
    transform: translateX(0);
    opacity: 1;
}
.notification.success { border-left-color: var(--success); }
.notification.info { border-left-color: var(--accent); }
.notification.warning { border-left-color: var(--warning); }
.notification-icon {
    font-size: 22px;
}
.notification.success .notification-icon { color: var(--success); }
.notification.info .notification-icon { color: var(--accent); }
.notification.warning .notification-icon { color: var(--warning); }
.notification-content {
    flex: 1;
}
.notification-title {
    font-weight: 600;
    margin-bottom: 5px;
}
.notification-message {
    font-size: 14px;
    opacity: 0.9;
}
.notification-close {
    background: none;
    border: none;
    color: var(--text);
    opacity: 0.6;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
}
.notification-close:hover { 
    opacity: 1;
    transform: rotate(90deg);
}

/* THEME TAB */
.theme-tab {
    position: fixed;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    background: var(--card);
    backdrop-filter: blur(12px);
    border-radius: 0 12px 12px 0;
    padding: 12px 14px;
    cursor: pointer;
    z-index: 5;
    border: 1px solid rgba(255,255,255,.2);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.theme-tab:hover { 
    padding-left: 20px;
    background: rgba(108, 99, 255, 0.2);
}
.theme-tab i { 
    color: var(--accent); 
    font-size: 18px;
    transition: transform 0.5s;
}
.theme-tab:hover i {
    transform: rotate(180deg);
}

/* LOADER */
#loader {
    position: fixed;
    inset: 0;
    background: rgba(10,10,30,.98);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    transition: opacity 0.8s ease, visibility 0.8s ease;
}
.loader-circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 5px solid transparent;
    background: linear-gradient(135deg, var(--accent), #9d4edd, #6c63ff) border-box;
    -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    animation: rotate 2s linear infinite, pulse 2s ease-in-out infinite;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
.loader-circle::before {
    content: '';
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: rgba(10,10,30,.98);
}
.loader-circle.done {
    animation: donePulse 1.5s ease-in-out;
}
.loader-circle i {
    font-size: 36px;
    color: var(--accent);
    opacity: 0;
    transform: scale(0);
    transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 1;
    position: relative;
}
.loader-circle.done i {
    opacity: 1;
    transform: scale(1);
    animation: iconPulse 1s ease-in-out infinite alternate;
}
@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
@keyframes pulse {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.05) rotate(180deg); }
}
@keyframes donePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}
@keyframes iconPulse {
    from { transform: scale(1); }
    to { transform: scale(1.1); }
}

.progress-container {
    width: 280px;
    height: 6px;
    background: rgba(255,255,255,.1);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 30px;
    position: relative;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
}
.progress-container::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.2) 50%, 
        transparent 100%);
    animation: shimmer 2s infinite;
}
@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}
.progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, 
        var(--accent) 0%, 
        #9d4edd 50%, 
        #6c63ff 100%);
    border-radius: 10px;
    transition: width 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}
.progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.4) 50%, 
        transparent 100%);
    animation: shimmer 1.5s infinite;
}
.progress-text {
    margin-top: 15px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 1px;
    text-transform: uppercase;
    opacity: 0.9;
    animation: textPulse 2s ease-in-out infinite;
}
@keyframes textPulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

/* TOPBAR */
.topbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: var(--card);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255,255,255,.15);
    padding: 12px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 50;
    animation: slideDown 0.8s ease-out;
}
@keyframes slideDown {
    from { transform: translateY(-100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
.topbar-left {
    display: flex;
    align-items: center;
    gap: 15px;
}
.topbar-user {
    display: flex;
    align-items: center;
    gap: 10px;
}
.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    animation: avatarGlow 3s ease-in-out infinite;
}
@keyframes avatarGlow {
    0%, 100% { box-shadow: 0 0 10px var(--accent); }
    50% { box-shadow: 0 0 20px var(--accent); }
}
.user-info {
    display: flex;
    flex-direction: column;
}
.user-name {
    font-weight: 600;
    font-size: 16px;
}
.user-role {
    font-size: 12px;
    opacity: 0.8;
}
.topbar-tabs {
    display: flex;
    gap: 8px;
}
.tab-btn {
    background: rgba(255,255,255,0.1);
    border: none;
    color: var(--text);
    padding: 8px 20px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    position: relative;
    overflow: hidden;
}
.tab-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.7s;
}
.tab-btn:hover::before {
    left: 100%;
}
.tab-btn:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
}
.tab-btn.active {
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    color: white;
    box-shadow: 0 4px 12px rgba(108, 99, 255, 0.4);
}

/* APP CONTAINER - CENTRADO COMPLETO */
#app {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
    transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 2;
    width: 100%;
    max-width: 1400px;
    margin: 100px auto 30px;
    display: flex;
    justify-content: center;
    align-items: flex-start;
}
#app.show {
    opacity: 1;
    transform: translateY(0) scale(1);
    animation: float 6s ease-in-out infinite;
}
@keyframes float {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-10px) scale(1.01); }
}

/* CONTENT AREA */
.content-area {
    display: grid;
    grid-template-columns: 1fr 1fr 400px;
    gap: 30px;
    width: 100%;
    animation: fadeIn 1s ease-out 0.3s both;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* PANELS */
.main-panel {
    background: var(--card);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 40px;
    border: 1px solid rgba(255,255,255,.2);
    animation: panelSlideIn 0.8s ease-out 0.2s both;
    width: 100%;
    display: flex;
    justify-content: center;
}
@keyframes panelSlideIn {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
}
.side-panel {
    display: flex;
    flex-direction: column;
    gap: 30px;
    animation: panelSlideInRight 0.8s ease-out 0.4s both;
    width: 100%;
}
@keyframes panelSlideInRight {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
}

/* CODE PANEL - NUEVO PANEL DE CÓDIGO */
.code-panel {
    background: var(--code-bg);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 25px;
    border: 1px solid rgba(108, 99, 255, 0.3);
    animation: panelSlideInRight 0.8s ease-out 0.6s both;
    width: 100%;
    max-height: 700px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
.code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(108, 99, 255, 0.3);
}
.code-title {
    font-size: 18px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--accent);
}
.code-title i {
    animation: iconBounce 2s ease-in-out infinite;
}
.code-controls {
    display: flex;
    gap: 10px;
}
.code-btn {
    background: rgba(108, 99, 255, 0.2);
    border: none;
    color: var(--text);
    width: 36px;
    height: 36px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}
.code-btn:hover {
    background: var(--accent);
    transform: scale(1.1);
}
.code-wrapper {
    background: #0a0a1a;
    border-radius: 12px;
    overflow: hidden;
    flex: 1;
    border: 1px solid rgba(108, 99, 255, 0.2);
}
.code-tabs {
    display: flex;
    background: #151525;
    border-bottom: 1px solid rgba(108, 99, 255, 0.2);
}
.code-tab {
    padding: 12px 20px;
    background: transparent;
    border: none;
    color: var(--text);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    border-right: 1px solid rgba(108, 99, 255, 0.1);
}
.code-tab.active {
    background: rgba(108, 99, 255, 0.2);
    color: var(--accent);
    border-bottom: 2px solid var(--accent);
}
.code-content {
    padding: 20px;
    max-height: 500px;
    overflow-y: auto;
}
.code-content::-webkit-scrollbar {
    width: 8px;
}
.code-content::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.2);
    border-radius: 4px;
}
.code-content::-webkit-scrollbar-thumb {
    background: var(--accent);
    border-radius: 4px;
}
.code-editor {
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 13px;
    line-height: 1.6;
    white-space: pre-wrap;
    color: var(--code-text);
}
.line-number {
    color: var(--line-number);
    display: inline-block;
    width: 40px;
    text-align: right;
    padding-right: 15px;
    user-select: none;
    opacity: 0.7;
}
.code-line {
    margin-bottom: 2px;
}
.code-comment {
    color: #6272a4;
    font-style: italic;
}
.code-keyword {
    color: #ff79c6;
    font-weight: bold;
}
.code-string {
    color: #f1fa8c;
}
.code-function {
    color: #50fa7b;
}
.code-number {
    color: #bd93f9;
}
.code-operator {
    color: #ff79c6;
}

.code-footer {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 15px;
    border-top: 1px solid rgba(108, 99, 255, 0.2);
}
.code-status {
    font-size: 12px;
    color: #6272a4;
    display: flex;
    align-items: center;
    gap: 8px;
}
.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--success);
    animation: statusPulse 2s ease-in-out infinite;
}
@keyframes statusPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
.code-actions {
    display: flex;
    gap: 10px;
}
.code-action-btn {
    background: rgba(108, 99, 255, 0.2);
    border: none;
    color: var(--text);
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 6px;
}
.code-action-btn:hover {
    background: var(--accent);
    transform: translateY(-2px);
}
.code-action-btn.run {
    background: linear-gradient(135deg, #50fa7b, #2ecc71);
    color: #000;
}
.code-action-btn.copy {
    background: linear-gradient(135deg, #8be9fd, #3498db);
    color: #000;
}

.discord-panel, .music-panel {
    background: var(--card);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 30px;
    border: 1px solid rgba(255,255,255,.2);
    position: relative;
    animation: panelAppear 0.6s ease-out both;
    width: 100%;
}
@keyframes panelAppear {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

/* DISCORD PANEL */
.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,.1);
}
.panel-title {
    font-size: 22px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
}
.panel-title i { 
    color: var(--accent);
    animation: iconBounce 2s ease-in-out infinite;
}
@keyframes iconBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.close-panel {
    background: none;
    border: none;
    color: var(--text);
    opacity: 0.7;
    cursor: pointer;
    font-size: 18px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.close-panel:hover { 
    opacity: 1;
    background: rgba(255,255,255,0.1);
    transform: rotate(90deg);
}

.discord-info {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 25px;
}
.info-item {
    background: linear-gradient(135deg, rgba(0,0,0,0.2), rgba(255,255,255,0.05));
    padding: 18px;
    border-radius: 12px;
    border-left: 4px solid var(--accent);
    transition: all 0.3s ease;
    animation: itemFadeIn 0.5s ease-out both;
}
@keyframes itemFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.info-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(108, 99, 255, 0.2);
    background: linear-gradient(135deg, rgba(108, 99, 255, 0.2), rgba(157, 78, 221, 0.1));
}
.info-label {
    font-size: 12px;
    opacity: 0.7;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.info-value {
    font-weight: 700;
    font-size: 20px;
}
.discord-link {
    background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(255,255,255,0.05));
    padding: 20px;
    border-radius: 12px;
    margin-top: 20px;
    position: relative;
    overflow: hidden;
    animation: linkSlideIn 0.6s ease-out 0.7s both;
}
@keyframes linkSlideIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.blur-text {
    filter: blur(8px);
    transition: filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    user-select: none;
    font-weight: 500;
}
.blur-text.show {
    filter: none;
}
.link-controls {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 10px;
}
.link-btn {
    background: rgba(255,255,255,0.1);
    border: none;
    color: var(--text);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}
.link-btn:hover {
    background: var(--accent);
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 5px 15px rgba(108, 99, 255, 0.4);
}
.discord-join {
    width: 100%;
    margin-top: 25px;
    padding: 16px;
    border-radius: 12px;
    border: none;
    background: linear-gradient(135deg, #5865F2, #9d4edd);
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 16px;
    position: relative;
    overflow: hidden;
}
.discord-join::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.7s;
}
.discord-join:hover::before {
    left: 100%;
}
.discord-join:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(88, 101, 242, 0.4);
}

/* MUSIC PLAYER */
.music-player {
    margin-top: 20px;
}
.track-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 25px;
    max-height: 300px;
    overflow-y: auto;
    padding-right: 5px;
}
.track-list::-webkit-scrollbar {
    width: 6px;
}
.track-list::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
}
.track-list::-webkit-scrollbar-thumb {
    background: var(--accent);
    border-radius: 10px;
}
.track-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: linear-gradient(135deg, rgba(0,0,0,0.2), rgba(255,255,255,0.05));
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    animation: trackSlideIn 0.5s ease-out both;
}
@keyframes trackSlideIn {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
}
.track-item:hover {
    background: linear-gradient(135deg, rgba(108, 99, 255, 0.2), rgba(157, 78, 221, 0.1));
    transform: translateX(5px);
}
.track-item.active {
    background: linear-gradient(135deg, rgba(108, 99, 255, 0.3), rgba(157, 78, 221, 0.2));
    border-left: 4px solid var(--accent);
    box-shadow: 0 5px 15px rgba(108, 99, 255, 0.2);
}
.track-cover {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    animation: coverSpin 20s linear infinite;
}
@keyframes coverSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
.track-item.active .track-cover {
    animation: coverPulse 2s ease-in-out infinite;
}
@keyframes coverPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
.track-info {
    flex: 1;
}
.track-title {
    font-weight: 600;
    margin-bottom: 5px;
    font-size: 16px;
}
.track-artist {
    font-size: 13px;
    opacity: 0.8;
}
.player-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 25px;
}
.control-btn {
    background: linear-gradient(135deg, rgba(0,0,0,0.2), rgba(255,255,255,0.05));
    border: none;
    color: var(--text);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    backdrop-filter: blur(10px);
}
.control-btn:hover {
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
}
.play-btn {
    width: 60px;
    height: 60px;
    font-size: 22px;
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    box-shadow: 0 5px 20px rgba(108, 99, 255, 0.4);
}
.play-btn:hover {
    transform: scale(1.15);
}
.music-progress-container {
    width: 100%;
    height: 6px;
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
    margin-top: 25px;
    cursor: pointer;
    overflow: hidden;
}
.music-progress-bar {
    height: 100%;
    width: 30%;
    background: linear-gradient(90deg, var(--accent), #9d4edd);
    border-radius: 3px;
    transition: width 0.1s;
    position: relative;
    overflow: hidden;
}
.music-progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.4) 50%, 
        transparent 100%);
    animation: shimmer 1.5s infinite;
}
.time-display {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-size: 12px;
    opacity: 0.8;
}

/* MAIN LOGIN BOX - CORREGIDO PARA CENTRAR */
.login-container {
    width: 100%;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.logo-img {
    width: 120px;
    filter: drop-shadow(0 0 20px var(--accent));
    animation: logoFloat 4s ease-in-out infinite, logoGlow 3s ease-in-out infinite;
    margin: 0 auto;
    display: block;
}
@keyframes logoFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-10px) rotate(2deg); }
    75% { transform: translateY(5px) rotate(-2deg); }
}
@keyframes logoGlow {
    0%, 100% { filter: drop-shadow(0 0 15px var(--accent)); }
    50% { filter: drop-shadow(0 0 30px var(--accent)); }
}
.logo {
    font-size: 42px;
    letter-spacing: 8px;
    font-weight: 900;
    margin: 15px 0 30px;
    background: linear-gradient(135deg, var(--text), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: logoTextGlow 3s ease-in-out infinite;
    text-align: center;
    width: 100%;
}
@keyframes logoTextGlow {
    0%, 100% { opacity: 0.9; }
    50% { opacity: 1; }
}

.login-box {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    text-align: center;
}

.announcement {
    background: linear-gradient(135deg, rgba(108,99,255,.2), rgba(157,78,221,.1));
    border: 1px solid rgba(108,99,255,.3);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 25px;
    font-size: 14px;
    backdrop-filter: blur(10px);
    animation: announcementPulse 2s ease-in-out infinite;
    text-align: center;
    width: 100%;
}
@keyframes announcementPulse {
    0%, 100% { border-color: rgba(108,99,255,.3); }
    50% { border-color: rgba(108,99,255,.6); }
}

.key-wrapper {
    position: relative;
    margin-bottom: 5px;
    width: 100%;
}
input {
    width: 100%;
    padding: 18px 100px 18px 20px;
    background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(255,255,255,0.05));
    border: 2px solid rgba(255,255,255,.2);
    border-radius: 12px;
    color: #fff;
    font-size: 16px;
    font-weight: 500;
    letter-spacing: 2px;
    backdrop-filter: blur(10px);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    filter: blur(6px);
}
input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 20px rgba(108, 99, 255, 0.3);
}
input.show { 
    filter: none;
    animation: inputGlow 2s ease-in-out infinite;
}
@keyframes inputGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(108, 99, 255, 0.2); }
    50% { box-shadow: 0 0 20px rgba(108, 99, 255, 0.4); }
}
.key-actions {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 12px;
}
.key-actions button {
    background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(255,255,255,0.1));
    border: none;
    color: var(--accent);
    cursor: pointer;
    font-size: 20px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}
.key-actions button:hover {
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    color: white;
    transform: scale(1.1) rotate(10deg);
    box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
}
.generate-button {
    width: 100%;
    margin: 25px 0 15px;
    padding: 18px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), #9d4edd);
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 16px;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
}
.generate-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.7s;
}
.generate-button:hover::before {
    left: 100%;
}
.generate-button:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(108, 99, 255, 0.4);
    letter-spacing: 2px;
}
.discord-button {
    width: 100%;
    padding: 18px;
    border-radius: 12px;
    border: 2px solid var(--accent);
    background: transparent;
    color: var(--text);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 16px;
    backdrop-filter: blur(10px);
}
.discord-button:hover {
    background: linear-gradient(135deg, rgba(108,99,255,.2), rgba(157,78,221,.1));
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(108, 99, 255, 0.3);
    letter-spacing: 1px;
}
.footer {
    margin-top: 25px;
    font-size: 14px;
    opacity: .7;
    text-align: center;
    letter-spacing: 1px;
    width: 100%;
}

/* FORZAR CENTRADO DE TODO EL CONTENIDO DEL LOGIN */
.login-container > *,
.login-box > * {
    margin-left: auto;
    margin-right: auto;
}

/* GENERATOR MODAL */
#genModal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.8);
    backdrop-filter: blur(15px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
#genModal.show {
    opacity: 1;
    pointer-events: auto;
}
.gen-box {
    width: 350px;
    background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(255,255,255,0.05));
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    border: 1px solid rgba(255,255,255,.2);
    backdrop-filter: blur(20px);
    animation: modalAppear 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}
@keyframes modalAppear {
    from { opacity: 0; transform: scale(0.8) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}
.gen-circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 5px solid transparent;
    background: linear-gradient(135deg, var(--accent), #9d4edd, #6c63ff) border-box;
    -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    animation: rotate 1.5s linear infinite, modalPulse 2s ease-in-out infinite;
    margin: 0 auto 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
.gen-circle::before {
    content: '';
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: rgba(0,0,0,0.4);
}
@keyframes modalPulse {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(180deg); }
}
.gen-circle.done {
    animation: genDone 1s ease-in-out;
}
@keyframes genDone {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}
.gen-circle i {
    font-size: 40px;
    color: var(--accent);
    opacity: 0;
    transform: scale(0);
    transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 1;
    position: relative;
}
.gen-circle.done i {
    opacity: 1;
    transform: scale(1);
    animation: genIconPulse 1s ease-in-out infinite alternate;
}
@keyframes genIconPulse {
    from { transform: scale(1); }
    to { transform: scale(1.2); }
}
.gen-bar {
    height: 8px;
    background: rgba(255,255,255,.1);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 20px;
    position: relative;
}
.gen-bar div {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--accent), #9d4edd, #6c63ff);
    border-radius: 4px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}
.gen-bar div::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.4) 50%, 
        transparent 100%);
    animation: shimmer 1s infinite;
}
.gen-text {
    margin-top: 15px;
    font-size: 16px;
    font-weight: 500;
    letter-spacing: 1px;
}

/* AUDIO PLAYER CONTROLS */
.audio-player {
    display: none; /* Oculto, pero funcional */
}
.volume-control {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 15px;
}
.volume-slider {
    flex: 1;
    height: 6px;
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
    outline: none;
    -webkit-appearance: none;
}
.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 10px rgba(108, 99, 255, 0.5);
}

/* RESPONSIVE DESIGN */
@media (max-width: 1200px) {
    .content-area {
        grid-template-columns: 1fr 1fr;
    }
    .code-panel {
        grid-column: span 2;
        max-height: 400px;
    }
}
@media (max-width: 1024px) {
    .content-area {
        grid-template-columns: 1fr;
        max-width: 800px;
    }
    .code-panel {
        grid-column: span 1;
    }
    .topbar-tabs {
        flex-wrap: wrap;
        justify-content: center;
    }
    #app {
        margin: 100px auto;
        width: 95%;
    }
}
@media (max-width: 768px) {
    .topbar {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
        text-align: center;
    }
    .topbar-left {
        flex-direction: column;
        width: 100%;
    }
    .topbar-tabs {
        width: 100%;
        justify-content: center;
    }
    .tab-btn {
        padding: 8px 15px;
        font-size: 14px;
    }
    .discord-info {
        grid-template-columns: 1fr;
    }
    .content-area {
        padding: 15px;
        gap: 20px;
    }
    .main-panel, .discord-panel, .music-panel, .code-panel {
        padding: 25px;
    }
    .logo {
        font-size: 36px;
        letter-spacing: 6px;
    }
    .logo-img {
        width: 100px;
    }
    body {
        padding: 10px;
    }
    #app {
        margin: 120px auto 20px;
    }
}
@media (max-width: 480px) {
    .logo {
        font-size: 32px;
        letter-spacing: 4px;
    }
    .logo-img {
        width: 80px;
    }
    .main-panel, .discord-panel, .music-panel, .code-panel {
        padding: 20px;
    }
    .panel-title {
        font-size: 18px;
    }
    .info-value {
        font-size: 18px;
    }
    .generate-button, .discord-button {
        padding: 15px;
        font-size: 15px;
    }
    .notification {
        min-width: 280px;
        right: 10px;
    }
    .code-tabs {
        flex-wrap: wrap;
    }
    .code-tab {
        flex: 1;
        min-width: 80px;
        text-align: center;
        padding: 10px 5px;
        font-size: 12px;
    }
}
</style>
</head>
<body>
<canvas id="particles"></canvas>

<!-- NOTIFICATIONS -->
<div class="notification-container" id="notificationContainer"></div>

<!-- THEME TOGGLE -->
<div class="theme-tab" id="themeBtn"><i class="fas fa-adjust"></i></div>

<!-- TOPBAR -->
<div class="topbar">
    <div class="topbar-left">
        <div class="topbar-user">
            <div class="user-avatar">N</div>
            <div class="user-info">
                <div class="user-name">Nyx @Gohldon</div>
                <div class="user-role">Owner: D3_1M2D7D0B4E6B01</div>
            </div>
        </div>
    </div>
    <div class="topbar-tabs">
        <button class="tab-btn active" data-tab="main"><i class="fas fa-home"></i> Main</button>
        <button class="tab-btn" data-tab="discord"><i class="fab fa-discord"></i> Discord</button>
        <button class="tab-btn" data-tab="music"><i class="fas fa-music"></i> Music</button>
        <button class="tab-btn" data-tab="code"><i class="fas fa-code"></i> Scripts</button>
    </div>
</div>

<!-- INITIAL LOADER -->
<div id="loader">
    <div class="loader-circle" id="circle"><i class="fas fa-check"></i></div>
    <div class="progress-container"><div class="progress-bar" id="bar"></div></div>
    <div class="progress-text" id="txt">Loading 0%</div>
</div>

<!-- GENERATOR MODAL -->
<div id="genModal">
    <div class="gen-box">
        <div class="gen-circle" id="genCircle"><i class="fas fa-check"></i></div>
        <div class="gen-text" id="genText">Generating key… 30s</div>
        <div class="gen-bar"><div id="genBar"></div></div>
    </div>
</div>

<!-- MAIN APP -->
<div id="app">
    <div class="content-area">
        <!-- MAIN PANEL -->
        <div class="main-panel" id="mainPanel">
            <div class="login-container">
                <div style="width: 100%; max-width: 500px; margin: 0 auto; text-align: center;">
                    <img src="https://i.ibb.co/Q7HcNz2x/IMG-0599-removebg-preview-1.png" class="logo-img">
                    <div class="logo">N<span>Y</span>X</div>

                    <div class="login-box">
                        <div class="announcement">Arrondissement Maintenance sans</div>

                        <div class="key-wrapper">
                            <input id="key" readonly placeholder="KEY-XXX-XXX-XXX">
                            <div class="key-actions">
                                <button id="eye"><i class="fas fa-eye"></i></button>
                                <button id="copy"><i class="fas fa-copy"></i></button>
                            </div>
                        </div>

                        <button class="generate-button" id="gen">Generate Key</button>
                        <button class="discord-button" id="discordBtnMain"><i class="fab fa-discord"></i> Discord</button>

                        <div class="footer">NYX Launcher</div>
                        <div class="footer" style="margin-top: 10px; font-size: 12px;">
                            Activar Windows<br>
                            Vie à Configuration para activar Windows.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SIDE PANEL -->
        <div class="side-panel">
            <!-- DISCORD PANEL -->
            <div class="discord-panel" id="discordPanel" style="display: none;">
                <div class="panel-header">
                    <div class="panel-title"><i class="fab fa-discord"></i> Discord Server Info</div>
                    <button class="close-panel" data-panel="discordPanel"><i class="fas fa-times"></i></button>
                </div>
                
                <div class="discord-info">
                    <div class="info-item">
                        <div class="info-label">Online Users</div>
                        <div class="info-value" id="onlineCount">Loading...</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Offline Users</div>
                        <div class="info-value" id="offlineCount">-</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Owner</div>
                        <div class="info-value">Nyx @Gohldon</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Admin</div>
                        <div class="info-value">System</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Date Creation</div>
                        <div class="info-value">2023-11-15</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Server ID</div>
                        <div class="info-value">1449237072048160831</div>
                    </div>
                </div>

                <div class="discord-link">
                    <div class="info-label">Invite Link</div>
                    <div class="info-value blur-text" id="discordLink">https://discord.gg/F3SDzkZa6U</div>
                    <div class="link-controls">
                        <button class="link-btn" id="showLink"><i class="fas fa-eye"></i></button>
                        <button class="link-btn" id="copyLink"><i class="fas fa-copy"></i></button>
                    </div>
                </div>

                <button class="discord-join" id="joinDiscord">
                    <i class="fab fa-discord"></i> Join Discord Server
                </button>
            </div>

            <!-- MUSIC PANEL -->
            <div class="music-panel" id="musicPanel" style="display: none;">
                <div class="panel-header">
                    <div class="panel-title"><i class="fas fa-music"></i> Music Player</div>
                    <button class="close-panel" data-panel="musicPanel"><i class="fas fa-times"></i></button>
                </div>

                <div class="track-list" id="trackList">
                    <!-- Tracks will be added by JavaScript -->
                </div>

                <div class="music-player">
                    <div class="player-controls">
                        <button class="control-btn" id="prevBtn"><i class="fas fa-step-backward"></i></button>
                        <button class="control-btn play-btn" id="playBtn"><i class="fas fa-play"></i></button>
                        <button class="control-btn" id="nextBtn"><i class="fas fa-step-forward"></i></button>
                    </div>
                    
                    <div class="music-progress-container" id="musicProgress">
                        <div class="music-progress-bar" id="musicProgressBar"></div>
                    </div>
                    
                    <div class="time-display">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                    
                    <div class="volume-control">
                        <i class="fas fa-volume-up"></i>
                        <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider">
                    </div>
                </div>
            </div>
        </div>

        <!-- CODE PANEL - NUEVO PANEL DE CÓDIGO/SCRIPTS -->
        <div class="code-panel" id="codePanel" style="display: none;">
            <div class="code-header">
                <div class="code-title">
                    <i class="fas fa-terminal"></i> Script Executor
                </div>
                <div class="code-controls">
                    <button class="code-btn" title="Minimize"><i class="fas fa-minus"></i></button>
                    <button class="code-btn" title="Maximize"><i class="fas fa-expand"></i></button>
                    <button class="code-btn" title="Close" data-panel="codePanel"><i class="fas fa-times"></i></button>
                </div>
            </div>

            <div class="code-wrapper">
                <div class="code-tabs">
                    <button class="code-tab active" data-code="infinite">Infinite Yield</button>
                    <button class="code-tab" data-code="solar">Solaris</button>
                    <button class="code-tab" data-code="nyx">NYX Script</button>
                    <button class="code-tab" data-code="custom">Custom</button>
                </div>
                
                <div class="code-content">
                    <div class="code-editor" id="codeEditor">
                        <div class="code-line"><span class="line-number">1</span> <span class="code-comment">-- Infinite Yield v6.1</span></div>
                        <div class="code-line"><span class="line-number">2</span> <span class="code-keyword">if</span> <span class="code-function">getgenv</span>().TY_100KDD <span class="code-keyword">and</span> <span class="code-keyword">not</span> <span class="code-function">getgenv</span>().TY_RERK == <span class="code-keyword">true</span> <span class="code-keyword">then</span></div>
                        <div class="code-line"><span class="line-number">3</span>     <span class="code-comment">-- error("Infinite Yield is already running!", 0)</span></div>
                        <div class="code-line"><span class="line-number">4</span>     <span class="code-keyword">return</span></div>
                        <div class="code-line"><span class="line-number">5</span> <span class="code-keyword">end</span></div>
                        <div class="code-line"><span class="line-number">6</span></div>
                        <div class="code-line"><span class="line-number">7</span> <span class="code-function">getgenv</span>().TY_100KDD = <span class="code-keyword">true</span></div>
                        <div class="code-line"><span class="line-number">8</span> <span class="code-keyword">local</span> cllower = cllower <span class="code-keyword">or</span> <span class="code-keyword">function</span>(s) <span class="code-keyword">return</span> s <span class="code-keyword">end</span></div>
                        <div class="code-line"><span class="line-number">9</span> <span class="code-keyword">local</span> CONSULT = cllower(<span class="code-function">game</span>:<span class="code-function">GetService</span>(<span class="code-string">"CoreGui"</span>))</div>
                        <div class="code-line"><span class="line-number">10</span> <span class="code-keyword">local</span> Player = cllower(<span class="code-function">game</span>:<span class="code-function">GetService</span>(<span class="code-string">"Players"</span>).<span class="code-function">LocalPlayer</span>)</div>
                        <div class="code-line"><span class="line-number">11</span> <span class="code-keyword">if</span> <span class="code-keyword">not</span> <span class="code-function">game</span>:<span class="code-function">IsLoaded</span>() <span class="code-keyword">then</span></div>
                        <div class="code-line"><span class="line-number">12</span>     <span class="code-keyword">local</span> notLoaded = <span class="code-function">Instance.new</span>(<span class="code-string">"Message"</span>)</div>
                        <div class="code-line"><span class="line-number">13</span>     notLoaded.Parent = CONSULT</div>
                        <div class="code-line"><span class="line-number">14</span>     notLoaded.Text = <span class="code-string">"Infinite Yield is waiting for the game to load..."</span></div>
                        <div class="code-line"><span class="line-number">15</span>     <span class="code-function">game</span>.Loaded:<span class="code-function">Wait</span>()</div>
                        <div class="code-line"><span class="line-number">16</span>     notLoaded:<span class="code-function">Destroy</span>()</div>
                        <div class="code-line"><span class="line-number">17</span> <span class="code-keyword">end</span></div>
                        <div class="code-line"><span class="line-number">18</span></div>
                        <div class="code-line"><span class="line-number">19</span> <span class="code-keyword">local</span> currentVersion = <span class="code-string">"6.1"</span></div>
                        <div class="code-line"><span class="line-number">20</span></div>
                        <div class="code-line"><span class="line-number">21</span> Holder = <span class="code-function">Instance.new</span>(<span class="code-string">"Frame"</span>)</div>
                        <div class="code-line"><span class="line-number">22</span> Title = <span class="code-function">Instance.new</span>(<span class="code-string">"TextLabel"</span>)</div>
                        <div class="code-line"><span class="line-number">23</span> Dark = <span class="code-function">Instance.new</span>(<span class="code-string">"Frame"</span>)</div>
                        <div class="code-line"><span class="line-number">24</span> Cushor = <span class="code-function">Instance.new</span>(<span class="code-string">"TextBox"</span>)</div>
                        <div class="code-line"><span class="line-number">25</span> CODE = <span class="code-function">Instance.new</span>(<span class="code-string">"ScrollingFrame"</span>)</div>
                        <div class="code-line"><span class="line-number">26</span> <span class="code-keyword">local</span> allright = <span class="code-function">Instance.new</span>(<span class="code-string">"UIListLayout"</span>)</div>
                        <div class="code-line"><span class="line-number">27</span> <span class="code-keyword">local</span> impedition = <span class="code-function">Instance.new</span>(<span class="code-string">"ImageLabel"</span>)</div>
                    </div>
                </div>
            </div>

            <div class="code-footer">
                <div class="code-status">
                    <div class="status-indicator"></div>
                    <span>Script Ready - Lua 5.1</span>
                </div>
                <div class="code-actions">
                    <button class="code-action-btn copy" id="copyCode">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="code-action-btn run" id="runCode">
                        <i class="fas fa-play"></i> Execute
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- AUDIO ELEMENT (oculto pero funcional) -->
<audio id="audioPlayer" class="audio-player"></audio>

<script>
// NOTIFICATION SYSTEM
let notificationId = 0;
function showNotification(title, message, type = 'info', duration = 5000) {
    const container = document.getElementById('notificationContainer');
    const id = `notification-${notificationId++}`;
    const notification = document.createElement('div');
    notification.id = id;
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <div class="notification-icon">
            ${type === 'success' ? '<i class="fas fa-check-circle"></i>' : 
              type === 'warning' ? '<i class="fas fa-exclamation-triangle"></i>' : 
              '<i class="fas fa-info-circle"></i>'}
        </div>
        <div class="notification-content">
            <div class="notification-title">${title}</div>
            <div class="notification-message">${message}</div>
        </div>
        <button class="notification-close"><i class="fas fa-times"></i></button>
    `;
    
    container.appendChild(notification);
    
    // Show notification
    setTimeout(() => notification.classList.add('show'), 10);
    
    // Auto remove
    const autoRemove = setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            if (document.getElementById(id)) {
                notification.remove();
            }
        }, 400);
    }, duration);
    
    // Close button
    notification.querySelector('.notification-close').onclick = () => {
        clearTimeout(autoRemove);
        notification.classList.remove('show');
        setTimeout(() => {
            if (document.getElementById(id)) {
                notification.remove();
            }
        }, 400);
    };
    
    return id;
}

// Show loading notification when app is loaded
setTimeout(() => {
    showNotification('Launcher Loaded', 'NYX Launcher has been successfully loaded!', 'success', 3000);
}, 100);

// THEME TOGGLE
const themeBtn = document.getElementById('themeBtn');
if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');
themeBtn.onclick = () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', 
        document.body.classList.contains('dark') ? 'dark' : 'light');
};

// INITIAL LOADER - SUAVE Y CENTRADO
let p = 0;
const bar = document.getElementById('bar');
const txt = document.getElementById('txt');
const loader = document.getElementById('loader');
const app = document.getElementById('app');
const circle = document.getElementById('circle');

// Carga más suave y rápida (2-3 segundos)
const load = setInterval(() => {
    p += Math.random() * 4 + 3; // Incremento moderado
    
    if (p >= 100) {
        p = 100;
        clearInterval(load);
        circle.classList.add('done');
        
        // Notificación de carga completa
        showNotification('System Ready', 'All components loaded successfully!', 'success', 3000);
        
        setTimeout(() => {
            loader.style.opacity = 0;
            loader.style.visibility = 'hidden';
            app.classList.add('show');
        }, 800);
    }
    
    // Transición suave de la barra
    bar.style.width = p + '%';
    txt.textContent = `Loading ${Math.floor(p)}%`;
    
    // Efecto de texto animado
    if (p < 100) {
        txt.style.opacity = 0.7 + (Math.sin(Date.now() / 200) * 0.3);
    }
}, 200);

// GENERATE KEY MODAL
const modal = document.getElementById('genModal');
const genBar = document.getElementById('genBar');
const genText = document.getElementById('genText');
const genCircle = document.getElementById('genCircle');
const keyInput = document.getElementById('key');

document.getElementById('gen').onclick = () => {
    modal.classList.add('show');
    genCircle.classList.remove('done');
    let t = 30;
    let progress = 0;
    genBar.style.width = '0%';
    genText.textContent = `Generating key… ${t}s`;

    const interval = setInterval(() => {
        t--;
        progress += 100 / 30;
        genBar.style.width = progress + '%';
        genText.textContent = `Generating key… ${t}s`;

        if (t <= 0) {
            clearInterval(interval);
            genCircle.classList.add('done');

            const c = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            const g = () => Array.from({length: 3}, () => c[Math.random() * c.length | 0]).join('');
            keyInput.value = `KEY-${g()}-${g()}-${g()}`;
            keyInput.classList.remove('show');

            // Show success notification
            showNotification('Key Generated', 'Your license key has been generated successfully!', 'success', 4000);
            
            setTimeout(() => modal.classList.remove('show'), 1200);
        }
    }, 1000);
};

// KEY ACTIONS
document.getElementById('eye').onclick = () => {
    keyInput.classList.toggle('show');
    if (keyInput.classList.contains('show')) {
        showNotification('Key Revealed', 'License key is now visible', 'info', 2000);
    }
};

document.getElementById('copy').onclick = () => {
    if (keyInput.value) {
        navigator.clipboard.writeText(keyInput.value);
        showNotification('Copied!', 'Key copied to clipboard.', 'success', 2000);
    }
};

// DISCORD FUNCTIONS - SIN DUPLICADOS
const discordLink = 'https://discord.gg/F3SDzkZa6U';
const discordWidget = 'https://discord.com/api/guilds/1449237072048160831/widget.json';

// Variable para controlar notificaciones duplicadas
let discordNotificationId = null;

// Load Discord widget data
async function loadDiscordWidget() {
    try {
        // Cancelar notificación anterior si existe
        if (discordNotificationId) {
            const oldNotif = document.getElementById(discordNotificationId);
            if (oldNotif) {
                oldNotif.classList.remove('show');
                setTimeout(() => oldNotif.remove(), 400);
            }
        }
        
        discordNotificationId = showNotification('Loading Discord', 'Fetching server information...', 'info', 2000);
        const response = await fetch(discordWidget);
        const data = await response.json();
        document.getElementById('onlineCount').textContent = data.presence_count || '0';
        document.getElementById('offlineCount').textContent = data.members ? data.members.length - data.presence_count : '-';
        
        // Actualizar notificación existente
        discordNotificationId = showNotification('Discord Loaded', 'Server information updated', 'success', 2000);
    } catch (error) {
        console.error('Error loading Discord widget:', error);
        document.getElementById('onlineCount').textContent = 'Error';
        discordNotificationId = showNotification('Connection Error', 'Could not load Discord data', 'warning', 3000);
    }
}

// Discord link actions
document.getElementById('showLink').onclick = () => {
    const linkElement = document.getElementById('discordLink');
    linkElement.classList.toggle('show');
    const isVisible = linkElement.classList.contains('show');
    showNotification(
        isVisible ? 'Link Revealed' : 'Link Hidden',
        isVisible ? 'Discord link is now visible' : 'Discord link is now hidden',
        'info', 
        2000
    );
};

document.getElementById('copyLink').onclick = () => {
    navigator.clipboard.writeText(discordLink);
    showNotification('Link Copied', 'Discord invite link copied to clipboard.', 'success', 2000);
};

// Sistema único para botones de Discord
let lastDiscordClick = 0;
const discordClickHandler = () => {
    const now = Date.now();
    // Prevenir múltiples clics en menos de 500ms
    if (now - lastDiscordClick < 500) return;
    lastDiscordClick = now;
    
    window.open(discordLink, '_blank');
    showNotification('Redirecting...', 'Opening Discord server in new tab.', 'info', 2000);
};

// Asignar el mismo handler a todos los botones de Discord
document.getElementById('joinDiscord').onclick = discordClickHandler;
document.getElementById('discordBtnMain').onclick = discordClickHandler;

// TAB SWITCHING - ACTUALIZADO CON PANEL DE CÓDIGO
const tabBtns = document.querySelectorAll('.tab-btn');
const panels = {
    main: document.getElementById('mainPanel'),
    discord: document.getElementById('discordPanel'),
    music: document.getElementById('musicPanel'),
    code: document.getElementById('codePanel')
};

tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const tab = btn.dataset.tab;
        
        // Update active button with animation
        tabBtns.forEach(b => {
            b.classList.remove('active');
            b.style.transform = 'translateY(0)';
        });
        btn.classList.add('active');
        btn.style.transform = 'translateY(-2px)';
        
        // Show selected panel, hide others
        Object.keys(panels).forEach(key => {
            if (key === tab) {
                panels[key].style.display = 'block';
                // Add fade in animation
                panels[key].style.animation = 'panelAppear 0.6s ease-out';
            } else {
                panels[key].style.display = 'none';
            }
        });
        
        // Load data for tab if needed
        if (tab === 'discord') {
            loadDiscordWidget();
        }
        if (tab === 'music') {
            initMusicPlayer();
        }
        if (tab === 'code') {
            initCodePanel();
        }
    });
});

// CLOSE PANEL BUTTONS - ACTUALIZADO
document.querySelectorAll('.close-panel, .code-btn[data-panel]').forEach(btn => {
    btn.addEventListener('click', () => {
        const panelId = btn.dataset.panel;
        const panel = document.getElementById(panelId);
        
        if (!panel) return;
        
        // Animation for closing
        panel.style.animation = 'panelAppear 0.6s ease-out reverse';
        setTimeout(() => {
            panel.style.display = 'none';
            panel.style.animation = '';
        }, 600);
        
        // Switch back to main tab
        tabBtns.forEach(b => b.classList.remove('active'));
        document.querySelector('[data-tab="main"]').classList.add('active');
        panels.main.style.display = 'block';
    });
});

// CODE PANEL FUNCTIONALITY
const codeTabs = document.querySelectorAll('.code-tab');
const codeEditor = document.getElementById('codeEditor');

// Code snippets for different tabs
const codeSnippets = {
    infinite: `-- Infinite Yield v6.1
if getgenv().TY_100KDD and not getgenv().TY_RERK == true then
    -- error("Infinite Yield is already running!", 0)
    return
end

getgenv().TY_100KDD = true
local cllower = cllower or function(s) return s end
local CONSULT = cllower(game:GetService("CoreGui"))
local Player = cllower(game:GetService("Players").LocalPlayer)
if not game:IsLoaded() then
    local notLoaded = Instance.new("Message")
    notLoaded.Parent = CONSULT
    notLoaded.Text = "Infinite Yield is waiting for the game to load..."
    game.Loaded:Wait()
    notLoaded:Destroy()
end

local currentVersion = "6.1"

Holder = Instance.new("Frame")
Title = Instance.new("TextLabel")
Dark = Instance.new("Frame")
Cushor = Instance.new("TextBox")
CODE = Instance.new("ScrollingFrame")
local allright = Instance.new("UIListLayout")
local impedition = Instance.new("ImageLabel")
local uniform = Instance.new("ImageLabel")
local flip = Instance.new("TextLabel")
Profile = Instance.new("TextLabel")
Profisson = Instance.new("TextLabel")
KeyDisk = Instance.new("TextLabel")
Stoppon = Instance.new("TextLabel")
Button = Instance.new("TextButton")
On = Instance.new("TextButton")
Position = Instance.new("TextLabel")`,

    solar: `-- Solaris Script
local SolarisLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/Stebulous/solaris-ui/main/library.lua"))()

local win = SolarisLib:New({
    Name = "Solaris",
    FolderToSave = "Solaris"
})

local tab = win:Tab("Main")
local sec = tab:Section("Auto Farm")

sec:Toggle("Auto Collect", false, function(t)
    getgenv().autocollect = t
    while autocollect do
        wait(0.1)
        -- Auto collect code here
    end
end)

sec:Toggle("Auto Attack", false, function(t)
    getgenv().autoattack = t
    while autoattack do
        wait(0.5)
        -- Auto attack code here
    end
end)

local sec2 = tab:Section("Player")
sec2:Slider("WalkSpeed", 16, 100, 16, function(t)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = t
end)

sec2:Slider("JumpPower", 50, 200, 50, function(t)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = t
end)`,

    nyx: `-- NYX Script v1.0
local NYX = {}

NYX.Version = "1.0.0"
NYX.Author = "Nyx @Gohldon"

function NYX:Notify(title, message, duration)
    game.StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = message,
        Duration = duration or 5
    })
end

function NYX:Teleport(position)
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char.HumanoidRootPart.CFrame = position
    end
end

function NYX:GetPlayer(name)
    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Name:lower():find(name:lower()) then
            return player
        end
    end
    return nil
end

function NYX:ExecuteCommand(cmd)
    if cmd == "heal" then
        -- Healing logic
        NYX:Notify("Healed", "Player has been healed!", 3)
    elseif cmd == "godmode" then
        -- Godmode logic
        NYX:Notify("Godmode", "Godmode activated!", 3)
    end
end

-- Initialize NYX
getgenv().NYX = NYX
NYX:Notify("NYX Script", "Loaded successfully! Version " .. NYX.Version, 5)`
};

function initCodePanel() {
    // Set up code tabs
    codeTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            codeTabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            
            const codeType = tab.dataset.code;
            updateCodeDisplay(codeType);
        });
    });
    
    // Set up code actions
    document.getElementById('copyCode').addEventListener('click', () => {
        const codeText = codeEditor.textContent;
        navigator.clipboard.writeText(codeText);
        showNotification('Code Copied', 'Script code copied to clipboard!', 'success', 2000);
    });
    
    document.getElementById('runCode').addEventListener('click', () => {
        showNotification('Script Executed', 'Script execution simulated (demo mode)', 'info', 2000);
        
        // Simulate execution animation
        const runBtn = document.getElementById('runCode');
        const originalText = runBtn.innerHTML;
        runBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Executing...';
        runBtn.disabled = true;
        
        setTimeout(() => {
            runBtn.innerHTML = originalText;
            runBtn.disabled = false;
            showNotification('Execution Complete', 'Script executed successfully!', 'success', 2000);
        }, 1500);
    });
    
    // Initialize with first tab
    updateCodeDisplay('infinite');
}

function updateCodeDisplay(codeType) {
    let codeHTML = '';
    const code = codeSnippets[codeType];
    const lines = code.split('\n');
    
    lines.forEach((line, index) => {
        const lineNumber = index + 1;
        let formattedLine = line;
        
        // Syntax highlighting
        formattedLine = formattedLine
            .replace(/--.*$/g, '<span class="code-comment">$&</span>')
            .replace(/(".*?")/g, '<span class="code-string">$1</span>')
            .replace(/\b(function|local|if|then|else|end|return|and|or|not|while|do|for|in)\b/g, '<span class="code-keyword">$1</span>')
            .replace(/\b(getgenv|Instance\.new|game\.|wait|loadstring|pairs)\b/g, '<span class="code-function">$1</span>')
            .replace(/\b(true|false|nil)\b/g, '<span class="code-keyword">$1</span>')
            .replace(/\b\d+\b/g, '<span class="code-number">$&</span>');
        
        codeHTML += `<div class="code-line"><span class="line-number">${lineNumber}</span> ${formattedLine}</div>`;
    });
    
    codeEditor.innerHTML = codeHTML;
}

// MUSIC PLAYER CON AUDIO REAL (SIMULADO)
const musicTracks = [
    { 
        title: 'Night Drive', 
        artist: 'Synthwave Collective', 
        duration: '3:45',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-1.mp3'
    },
    { 
        title: 'Digital Dreams', 
        artist: 'Cyberpunk OST', 
        duration: '4:20',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-2.mp3'
    },
    { 
        title: 'Neon Lights', 
        artist: 'Retro Wave', 
        duration: '3:15',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-3.mp3'
    },
    { 
        title: 'Midnight City', 
        artist: 'M83', 
        duration: '4:04',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-4.mp3'
    },
    { 
        title: 'Blade Runner 2049', 
        artist: 'Hans Zimmer', 
        duration: '5:12',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-5.mp3'
    },
    { 
        title: 'Blinding Lights Remix', 
        artist: 'The Weeknd', 
        duration: '3:22',
        audioUrl: 'https://assets.codepen.io/4358584/synthwave-sample-6.mp3'
    }
];

let currentTrack = 0;
let isPlaying = false;
let progressInterval;
const audioPlayer = document.getElementById('audioPlayer');
const volumeSlider = document.getElementById('volumeSlider');

function initMusicPlayer() {
    const trackList = document.getElementById('trackList');
    trackList.innerHTML = '';
    
    musicTracks.forEach((track, index) => {
        const trackItem = document.createElement('div');
        trackItem.className = `track-item ${index === currentTrack ? 'active' : ''}`;
        trackItem.style.animationDelay = `${index * 0.1}s`;
        trackItem.innerHTML = `
            <div class="track-cover">
                <i class="fas fa-music"></i>
            </div>
            <div class="track-info">
                <div class="track-title">${track.title}</div>
                <div class="track-artist">${track.artist} • ${track.duration}</div>
            </div>
        `;
        trackItem.addEventListener('click', () => playTrack(index));
        trackList.appendChild(trackItem);
    });
    
    updatePlayerDisplay();
}

function playTrack(index) {
    currentTrack = index;
    isPlaying = true;
    
    // Actualizar UI
    document.querySelectorAll('.track-item').forEach((item, i) => {
        item.classList.toggle('active', i === index);
    });
    
    document.getElementById('playBtn').innerHTML = '<i class="fas fa-pause"></i>';
    
    const track = musicTracks[currentTrack];
    
    // Mostrar notificación
    showNotification('Now Playing', `${track.title} - ${track.artist}`, 'info', 2000);
    
    // Simular reproducción de audio
    simulateAudioPlayback();
    
    // Iniciar barra de progreso
    startProgressBar();
}

function simulateAudioPlayback() {
    console.log(`Playing: ${musicTracks[currentTrack].title}`);
}

function updatePlayerDisplay() {
    const track = musicTracks[currentTrack];
    document.getElementById('currentTime').textContent = '0:00';
    document.getElementById('duration').textContent = track.duration;
    document.getElementById('musicProgressBar').style.width = '0%';
}

function startProgressBar() {
    if (progressInterval) clearInterval(progressInterval);
    
    const progressBar = document.getElementById('musicProgressBar');
    let progress = 0;
    const trackDuration = parseDuration(musicTracks[currentTrack].duration);
    
    progressInterval = setInterval(() => {
        if (!isPlaying) return;
        
        progress += 100 / (trackDuration * 10);
        if (progress > 100) {
            progress = 100;
            clearInterval(progressInterval);
            playNext();
        }
        
        progressBar.style.width = progress + '%';
        
        const currentSeconds = Math.floor(trackDuration * (progress / 100));
        const minutes = Math.floor(currentSeconds / 60);
        const seconds = currentSeconds % 60;
        document.getElementById('currentTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }, 100);
}

function parseDuration(durationStr) {
    const parts = durationStr.split(':');
    return parseInt(parts[0]) * 60 + parseInt(parts[1]);
}

function playNext() {
    currentTrack = (currentTrack + 1) % musicTracks.length;
    playTrack(currentTrack);
}

function playPrev() {
    currentTrack = (currentTrack - 1 + musicTracks.length) % musicTracks.length;
    playTrack(currentTrack);
}

// Controles del reproductor de música
document.getElementById('playBtn').addEventListener('click', () => {
    if (musicTracks.length === 0) return;
    
    isPlaying = !isPlaying;
    document.getElementById('playBtn').innerHTML = isPlaying ? 
        '<i class="fas fa-pause"></i>' : '<i class="fas fa-play"></i>';
    
    if (isPlaying) {
        if (!document.querySelector('.track-item.active')) {
            playTrack(0);
        } else {
            simulateAudioPlayback();
            startProgressBar();
        }
        showNotification('Music Playing', musicTracks[currentTrack].title, 'info', 2000);
    } else {
        if (progressInterval) clearInterval(progressInterval);
        if (!audioPlayer.paused) audioPlayer.pause();
        showNotification('Music Paused', 'Playback paused', 'info', 2000);
    }
});

document.getElementById('nextBtn').addEventListener('click', playNext);
document.getElementById('prevBtn').addEventListener('click', playPrev);

// Control de volumen
volumeSlider.addEventListener('input', (e) => {
    const volume = e.target.value / 100;
    audioPlayer.volume = volume;
    showNotification('Volume', `Volume set to ${e.target.value}%`, 'info', 1000);
});

// Barra de progreso click
document.getElementById('musicProgress').addEventListener('click', (e) => {
    if (!isPlaying) return;
    
    const progressBar = document.getElementById('musicProgressBar');
    const rect = e.target.getBoundingClientRect();
    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
    progressBar.style.width = (percent * 100) + '%';
    
    const trackDuration = parseDuration(musicTracks[currentTrack].duration);
    const currentSeconds = Math.floor(trackDuration * percent);
    const minutes = Math.floor(currentSeconds / 60);
    const seconds = currentSeconds % 60;
    document.getElementById('currentTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    
    if (audioPlayer.duration) {
        audioPlayer.currentTime = trackDuration * percent;
    }
});

// Inicializar reproductor de música
initMusicPlayer();

// ADAPTACIÓN A LA RESOLUCIÓN DE PANTALLA
function adjustLayout() {
    const width = window.innerWidth;
    const app = document.getElementById('app');
    
    if (width < 768) {
        app.style.maxWidth = '100%';
        app.style.padding = '0 10px';
    } else if (width < 1024) {
        app.style.maxWidth = '90%';
    } else {
        app.style.maxWidth = '1400px';
    }
}

window.addEventListener('load', adjustLayout);
window.addEventListener('resize', adjustLayout);

// PARTICLES BACKGROUND
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
resize();
window.addEventListener('resize', resize);

let parts = Array.from({length: 80}, () => newP());

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}

function newP() {
    return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 2 + 1,
        dx: (Math.random() - .5) * 0.3,
        dy: (Math.random() - .5) * 0.3,
        color: `rgba(${Math.random() * 100 + 155}, ${Math.random() * 100 + 155}, 255, ${Math.random() * 0.3 + 0.2})`
    };
}

function anim() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Dibujar conexiones
    for (let i = 0; i < parts.length; i++) {
        for (let j = i + 1; j < parts.length; j++) {
            const dx = parts[i].x - parts[j].x;
            const dy = parts[i].y - parts[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < 100) {
                ctx.beginPath();
                ctx.strokeStyle = `rgba(160, 160, 255, ${0.2 * (1 - distance/100)})`;
                ctx.lineWidth = 0.5;
                ctx.moveTo(parts[i].x, parts[i].y);
                ctx.lineTo(parts[j].x, parts[j].y);
                ctx.stroke();
            }
        }
    }
    
    // Dibujar partículas
    parts.forEach(p => {
        p.x += p.dx;
        p.y += p.dy;
        
        if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
        
        p.x = Math.max(0, Math.min(canvas.width, p.x));
        p.y = Math.max(0, Math.min(canvas.height, p.y));
        
        ctx.beginPath();
        const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r * 2);
        gradient.addColorStop(0, p.color);
        gradient.addColorStop(1, 'rgba(160, 160, 255, 0)');
        
        ctx.fillStyle = gradient;
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
    });
    
    requestAnimationFrame(anim);
}
anim();

// Inicializar panel de código
initCodePanel();
</script>
</body>
</html>
